# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (c) 2020 Association Prologin <association@prologin.org>
{% import 'macros/make.jinja2' as make %}

# Add all your sources (must be suffixed by *.c) in here, separated by spaces
CHAMPION_SOURCES = champion.c
# Add all other files, like your headers in here, separated by spaces
CHAMPION_HEADERS =

# ----
# Do not modify the lines below

CHAMPION_HEADERS += api.h
INTERFACE_SOURCES = interface.cc
SOURCES = $(CHAMPION_SOURCES) $(CHAMPION_HEADERS) $(INTERFACE_SOURCES)

CFLAGS = -ggdb3 -Wall -std=c11 -fPIC
{{ make.common_flags() }}

objs = $(CHAMPION_SOURCES:.c=.o) $(INTERFACE_SOURCES:.cc=.o)
deps = $(objs:.o=.d)

champion.so: $(objs)
	$(CXX) -o $@ $^ -shared

{{ make.common_rules('c') }}
