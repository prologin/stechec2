# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (c) 2020 Association Prologin <association@prologin.org>
{% import 'macros/make.jinja2' as make %}

# Add all your sources (must be suffixed by *.py) in here, separated by spaces
CHAMPION_SOURCES = champion.py

# ----
# Do not modify the lines below

CHAMPION_SOURCES += api.py
INTERFACE_SOURCES = interface.cc
SOURCES = $(INTERFACE_SOURCES)

{{ make.common_flags() }}
CXXFLAGS += $(shell python3-config --embed --includes)
LDFLAGS += $(shell python3-config --embed --ldflags)

objs = $(INTERFACE_SOURCES:.cc=.o)
deps = $(objs:.o=.d)

champion.so: $(objs)
	$(CXX) -o $@ $^ -shared $(LDFLAGS)

{{ make.common_rules('python') }}
